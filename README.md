## é¡¹ç›®ä»‹ç»

    è¯¥é¡¹ç›®æ˜¯ä¸ºäº†æ»¡è¶³å…¬å¸ğŸš©å†…éƒ¨äº§å“ç®¡ç†ğŸš©çš„éœ€æ±‚è€Œå¼€å‘çš„ï¼Œä»¥webç«¯ä¸ºä¸»ï¼Œ
    ä½¿ç”¨**vue3**æ¡†æ¶å¼€å‘äº†ä¸€ä¸ªèƒ½å¤Ÿæœ‰æ•ˆè¿›è¡ŒåŒå‘æ§åˆ¶å’Œè·Ÿè¸ªçš„äº§å“ç®¡ç†ç³»ç»Ÿã€‚
    ä¸»è¦åŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€äº§å“ç®¡ç†ã€äº§å“æ–°å¢ã€è®¢å•ç®¡ç†ä»¥åŠæŸ¥è¯¢ä¿®æ”¹æ•°æ®ç­‰åŠŸèƒ½ã€‚  
    æŠ€æœ¯æ¶æ„ï¼šVue3+TypeScript, axios, Element-plus, vue-router, ECharts, pinia
---
#### å®‰è£…element-plus
ä½¿ç”¨element-plusè¿›è¡Œé¡µé¢çš„å¸ƒå±€ï¼ŒåŒ…æ‹¬ï¼š     
èœå•å¯¼èˆªã€é¢åŒ…å±‘å¯¼èˆªã€æ ‘å½¢æ§ä»¶ã€è¡¨å•ã€æŒ‰é’®ã€å¼¹å‡ºæ¶ˆæ¯æ¡†ã€å›¾ç‰‡ä¸Šä¼ ç­‰
```javascript
 1.npm install element-plus --save
 2.å¼•å…¥
    (1)å…¨å¯¼å…¥
        // main.ts
        import ElementPlus from 'element-plus'
        import 'element-plus/dist/index.css'
        app.use(ElementPlus)
        app.mount('#app')
    (2)æŒ‰éœ€å¯¼å…¥(ä¸ºäº†ä¼˜åŒ–é¦–å±æ¸²æŸ“æ—¶é—´å’Œæ€§èƒ½--æœ¬é¡¹ç›®é€‰æ‹©äº†æŒ‰éœ€å¯¼å…¥)
        1. ä¸‹è½½ä¾èµ–åŒ…
            npm install -D unplugin-vue-components unplugin-auto-import
        2. é…ç½®vite.configæ–‡ä»¶ 
```
#### å®‰è£…å…¶ä»–ä¾èµ–
```javascript
npm i normalize.css -S
npm i axios -S  
npm i querystring -S
npm i echars -S
    æŒ‰éœ€å¯¼å…¥
    import * as echarts from 'echarts/core';
    éœ€è¦å°†ä½¿ç”¨çš„echartsç»„ä»¶æ³¨å†Œ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ—¶å¼•ç”¨
npm i pinia
npm install @wangeditor/editor --save
npm install @wangeditor/editor-for-vue@next --save
npm install xlsx file-saver -S
```

<style>
pre {
  white-space: pre-wrap; /* è‡ªåŠ¨æ¢è¡Œ */
  word-wrap: break-word; /* å¼ºåˆ¶é•¿å•è¯æ¢è¡Œ */
}
</style>
#### é¡¹ç›®æ‰“åŒ…ä¼˜åŒ–
```javascript
é¡¹ç›®ä½¿ç”¨viteè¿›è¡Œæ‰“åŒ…
npm run build
æ‰“åŒ…åä½¿ç”¨lighthouseè¿›è¡Œæµ‹è¯•å‘ç°æ¸²æŸ“æ—¶é—´å¤ªæ…¢äº†ï¼Œå°±å¯¹æ‰“åŒ…è¿‡ç¨‹è¿›è¡Œäº†ä¼˜åŒ–
ä¸ºäº†è®©ç”¨æˆ·ç­‰å¾…è¿‡ç¨‹ä¸­ï¼Œå‡å°‘ç„¦è™‘ï¼Œåšäº†é¦–å±çš„éª¨æ¶å±
1.éª¨æ¶å±
    æˆ‘æœ€åˆæƒ³ä½¿ç”¨ Vue 3 ä¸­çš„ Suspense å†…ç½®ç»„ä»¶æ¥å¤„ç†ç»„ä»¶åŠ è½½ã€‚
    æˆ‘è®¤ä¸º App.vue ä½œä¸ºæ•´ä¸ªé¡µé¢æœ€å…ˆæŒ‚è½½å’Œæ‰§è¡Œçš„ç»„ä»¶ï¼Œæ˜¯ç»„ä»¶çš„å…¥å£ï¼Œè€Œé¦–å±åŠ è½½çš„ç»„ä»¶åº”è¯¥åœ¨è¿™é‡Œè¿›è¡ŒåŠ è½½ã€‚
    æˆ‘è®¡åˆ’å°†é¦–å±åŠ è½½çš„ç»„ä»¶ä½œä¸ºå¼‚æ­¥ç»„ä»¶ï¼Œåœ¨åŠ è½½æ—¶ä½¿ç”¨ Suspense ç»„ä»¶æä¾›çš„æ’æ§½åŠŸèƒ½æ¥åˆ†åˆ«åˆ¤æ–­åŠ è½½ä¸­å’Œ
    åŠ è½½åçš„çŠ¶æ€ï¼Œå¹¶å¯¹ä¸åŒçŠ¶æ€è¿›è¡Œå†…å®¹å‘ˆç°ï¼Œä»è€Œå®ç°å¼‚æ­¥åŠ è½½æ—¶æ˜¾ç¤ºéª¨æ¶å±å¹•ã€‚
    ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•è¡Œä¸é€šã€‚äº‹å®ä¸Šï¼ŒApp.vue ç¡®å®æ˜¯é¡¹ç›®çš„æ ¹ç»„ä»¶ï¼Œè€Œ src/main.ts æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œä¼šå°†è¿™ä¸ªæ ¹ç»„ä»¶è¿›è¡ŒæŒ‚è½½ã€‚
    æŒ‚è½½è¿‡ç¨‹å¦‚ä¸‹ï¼š
    å½“ createApp(App).mount('#app') è¢«è°ƒç”¨æ—¶ï¼ŒVue ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Vue å®ä¾‹ï¼Œå¹¶å°† App.vue ç»„ä»¶çš„å†…å®¹æ¸²æŸ“åˆ° index.html ä¸­çš„ #app å…ƒç´ å†…ã€‚
    ä¹‹åï¼ŒVue çš„å“åº”å¼ç³»ç»Ÿä¼šå¼€å§‹å·¥ä½œï¼Œç›‘å¬æ•°æ®çš„å˜åŒ–å¹¶æ›´æ–° DOMã€‚

    ä¹Ÿå°±æ˜¯è¯´ï¼Œé¦–æ¬¡åŠ è½½æ—¶ï¼Œåªæœ‰å½“main.tsé‡Œçš„app.useçš„ç»„ä»¶æŒ‚è½½å®Œæ¯•ä¹‹åï¼Œ
    æ¸²æŸ“åçš„å†…å®¹æ‰ä¼šå–ä»£index.htmlä¸­çš„#appï¼Œå†…å®¹æ‰ä¼šåœ¨é¡µé¢ä¸­å‘ˆç°ã€‚
    å› æ­¤ï¼Œåœ¨ #app æŒ‚è½½ä¹‹å‰ï¼Œå¯ä»¥å…ˆå°†å®ƒçš„CSSæ ·å¼è®¾ç½®ä¸ºéª¨æ¶å±ï¼Œ
    å½“å†…å®¹æ¸²æŸ“æˆåŠŸä¹‹åï¼Œéª¨æ¶å±çš„æ ·å¼ä¼šè¢«å®é™…å†…å®¹å–ä»£ã€‚

2.æ‹†åˆ†å°ä»£ç å—æ‰“åŒ…
----viteæ¯”webpackå¥½ï¼Œå®ƒå·²ç»åˆ†å—å¥½äº†ï¼Œvue3é»˜è®¤æ‰“åŒ…æ—¶è‡ªå¸¦tree-shaking
    
    ä¸ºä»€ä¹ˆè¦åˆ†åŒ…ï¼Ÿ
        1.æµè§ˆå™¨åœ¨è¯·æ±‚é™æ€èµ„æºæ—¶ï¼Œåªè¦é™æ€èµ„æºçš„åç§°ä¸å˜ï¼Œå®ƒå°±ä¸ä¼šé‡æ–°è¯·æ±‚ xxx.jsèµ„æºã€‚
        åœ¨æˆ‘ä»¬ä¿®æ”¹ä»£ç åè¿›è¡Œæ‰“åŒ…æ—¶ï¼Œå¾ˆå¤šä»£ç å—/é™æ€èµ„æºæ˜¯ä¸éœ€è¦è¿›è¡Œé‡æ–°æ¸²æŸ“çš„ï¼Œ
        æ‰€ä»¥æˆ‘ä»¬å°†è¿™éƒ¨åˆ†èµ„æºå•ç‹¬æ‰“åŒ…ï¼Œåˆ†åŒ…å‡ºæ¥ï¼Œå†æ¬¡æ‰“åŒ…æ—¶ï¼Œå®ƒä»¬çš„èµ„æºåç§°ä¸ä¼šæ”¹å˜ï¼Œå°±ä¸ä¼šé‡æ–°è¢«æ¸²æŸ“ã€‚
        2.å‡å°‘åˆå§‹åŠ è½½æ—¶é—´ï¼Œå°†åº”ç”¨ç¨‹åºçš„ä»£ç æ‹†åˆ†æˆå¤šä¸ªè¾ƒå°çš„åŒ…ï¼Œå¯ä»¥å‡å°‘åˆå§‹åŠ è½½æ—¶éœ€è¦ä¸‹è½½çš„ä»£ç é‡ï¼Œä»è€Œæé«˜é¡µé¢çš„åŠ è½½é€Ÿåº¦
    
    åœ¨vite.configä¸­å¯¹buildè¿›è¡Œé…ç½®    
    build: {
        rollupOptions: {
        treeshake: true, // (é»˜è®¤å¼€å¯)å¼€å¯ Tree Shakingï¼Œæ¶ˆé™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œå‡å°æœ€ç»ˆçš„åŒ…å¤§å°
        output: { // èµ„æºåˆ†åŒ…
            chunkFileNames: 'js/[name]-[hash].js', // å¼•å…¥æ–‡ä»¶åçš„åç§° nameè¾“å‡ºåå­— hashå†…å®¹çš„å“ˆå¸Œå€¼
            entryFileNames: 'js/[name]-[hash].js', // åŒ…çš„å…¥å£æ–‡ä»¶åç§° 
            assetFileNames: '[ext]/[name]-[hash].[ext]', // èµ„æºæ–‡ä»¶åƒ å­—ä½“ï¼Œå›¾ç‰‡ç­‰ ext-è¡¨ç¤ºæ–‡ä»¶æ‰©å±•å

            manualChunks(id) {
            if (id.includes('node_modules')) {
                //rollupçš„output.manualChunksè¿™ä¸€é…ç½®å¯ä»¥å®ç°åˆ†åŒ…ç­–ç•¥
                return id.toString().split('node_modules/')[1].split('/')[0].toString()
            }
            },
        }
        }
    }
3.ä»£ç å‹ç¼©æˆGIZPæ ¼å¼
ï¼ˆéœ€è¦æœåŠ¡å™¨ä¹Ÿè¿›è¡Œgizpçš„å‹ç¼©ï¼Œè¿™æ ·æ‰èƒ½åŠ è½½å‰ç«¯æ‰“åŒ…å¥½çš„gizpåˆ°æœåŠ¡å™¨é‡Œé¢ä½¿ç”¨ï¼‰
ï¼ˆé…ç½®nginxï¼‰ï¼ˆè®©æµè§ˆå™¨è®¿é—®çš„æ˜¯ä¸€ä¸ªä»æœåŠ¡å™¨å‘é€çš„å‹ç¼©æ–‡ä»¶ï¼‰
 å¸¸è§çš„å›¾ç‰‡ï¼ˆJPEGã€PNGã€GIFï¼‰éƒ½å±äºéæ–‡æœ¬ç±»å‹ï¼Œgzip éƒ½ä¸æ”¯æŒå‹ç¼©

**åœ¨æœ¬åœ°è®¾ç½®gizpå‹ç¼©**
    ä¸‹è¼‰ä¾è³´
    npm i vite-plugin-compression -D
    åœ¨vite.configä¸­pluginså¼•å…¥
        import viteCompression from 'vite-plugin-compression'
        
        //åœ¨pluginsé…ç½®æ•°ç»„é‡Œæ·»åŠ gzipæ’ä»¶
        viteCompression({
            verbose: true, // é»˜è®¤å³å¯
            disable: false, // å¼€å¯å‹ç¼©(ä¸ç¦ç”¨)ï¼Œé»˜è®¤å³å¯
            deleteOriginFile: false, // åˆ é™¤æºæ–‡ä»¶
            threshold: 5120, // å‹ç¼©å‰æœ€å°æ–‡ä»¶å¤§å°
            algorithm: 'gzip', // å‹ç¼©ç®—æ³•
            ext: '.gz' // æ–‡ä»¶ç±»å‹
        })


**åœ¨nginxæœå‹™ç«¯éƒ¨ç½²gizpå‹ç¼©**
    # å¼€å¯æˆ–è€…å…³é—­gzipæ¨¡å—(on|off)
    gzip on;
    # å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°, é»˜è®¤å€¼æ˜¯0ï¼Œä¸ç®¡é¡µé¢å¤šå¤§éƒ½å‹ç¼©ã€‚å»ºè®®è®¾ç½®æˆå¤§äº1kçš„å­—èŠ‚æ•°ï¼Œå°äº1kå¯èƒ½ä¼šè¶Šå‹è¶Šå¤§
    gzip_min_length 1k;
    # è®¾ç½®ç³»ç»Ÿè·å–å‡ ä¸ªå•ä½çš„ç¼“å­˜ç”¨äºå­˜å‚¨gzipçš„å‹ç¼©ç»“æœæ•°æ®æµã€‚ä¾‹å¦‚ 4 4k ä»£è¡¨ä»¥4kä¸ºå•ä½ï¼ŒæŒ‰ç…§åŸå§‹æ•°æ®å¤§å°ä»¥4kä¸ºå•ä½çš„4å€ç”³è¯·å†…å­˜ã€‚
    gzip_buffers 4 16k;
    # è¯†åˆ«httpçš„åè®®ç‰ˆæœ¬ã€‚ç”±äºæ—©æœŸçš„ä¸€äº›æµè§ˆå™¨æˆ–è€…httpå®¢æˆ·ç«¯ï¼Œå¯èƒ½ä¸æ”¯æŒgzipè‡ªè§£å‹ï¼Œç”¨æˆ·å°±ä¼šçœ‹åˆ°ä¹±ç ï¼Œæ‰€ä»¥åšä¸€äº›åˆ¤æ–­è¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚
    #gzip_http_version 1.0;
    # gzipå‹ç¼©æ¯”ï¼Œ1å‹ç¼©æ¯”æœ€å°å¤„ç†é€Ÿåº¦æœ€å¿«ï¼Œ9 å‹ç¼©æ¯”æœ€å¤§ä½†å¤„ç†æœ€æ…¢ï¼ˆä¼ è¾“å¿«ä½†æ¯”è¾ƒæ¶ˆè€—cpuï¼‰ã€‚
    gzip_comp_level 2;
    # åŒ¹é…MIMEç±»å‹è¿›è¡Œå‹ç¼©ï¼Œï¼ˆæ— è®ºæ˜¯å¦æŒ‡å®šï¼‰"text/html"ç±»å‹æ€»æ˜¯ä¼šè¢«å‹ç¼©çš„ã€‚
    gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;
    # å’Œhttpå¤´æœ‰å…³ç³»ï¼ŒåŠ ä¸ªvaryå¤´ï¼Œç»™ä»£ç†æœåŠ¡å™¨ç”¨çš„
    gzip_vary off;
    # è¡¨ç¤ºIE6åŠä»¥ä¸‹ç¦æ­¢å‹ç¼©
    gzip_disable "MSIE [1-6]\.";


 **åœ¨nginxæœåŠ¡ç«¯ä¸­å…¶ä»–é…ç½®**
        #è§£å†³é—®é¢˜1ï¼šåˆ·æ–°é¡µé¢404
        #æ— æ³•åŒ¹é…èµ„æºæ—¶å€™ï¼ŒæŠŠindex.htmlé‡å®šå‘å‡ºæ¥ï¼Œjsæœ‰å“åº”åï¼Œç¨‹åºæ­£å¸¸æ‰§è¡Œ
        location / {
            root   D:\front_end_temp\dist_2_gizp;
            index  index.html index.htm; 
            try_files $uri $uri/ /index.html; 
        }
        #è§£å†³é—®é¢˜2ï¼šåç«¯æ¥å£æ•°æ®æ‹¿ä¸åˆ°é—®é¢˜
        # é…ç½®ä»£ç†æœåŠ¡å¤±æ•ˆï¼Œéœ€è¦è‡ªå·±é…ç½®åå‘ä»£ç†
        location /api/ {
            # è®¾ç½®ä»£ç†ç›®æ ‡
            proxy_pass http://localhost:6688/; # æˆ‘çš„åç«¯æ•°æ®åœ¨æœ¬åœ°ä¸Š
        }
            #error_page  404              /404.html;
            # redirect server error pages to the static page /50x.html
            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
            root   html;
        }

4.ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆCDNï¼‰
     éœ€è¦å°†ä¾èµ–çš„æ’ä»¶èµ„æºä»åˆ«çš„ç½‘ç«™ä¸Šé¢ä¸‹è½½ä¸‹æ¥ï¼Œä½†æ˜¯è¿™ä¸ªç½‘ç«™ä¸ä¸€å®šç¨³å®šï¼ˆä¸çŸ¥é“è®¿é—®çš„äººå¤šä¸å¤šã€ä»¥åŠæœåŠ¡å™¨ä¼šä¸ä¼šæŒ‚ï¼‰ï¼Œ
     æ‰€ä»¥ä¸ºäº†ç¨³å®šå’Œå®‰å…¨æ€§ï¼Œæœ€å¥½ä¸ç”¨ã€‚
     å®é™…ä¸Šï¼Œæˆ‘ä½¿ç”¨CDNä¸»è¦è¿˜æ˜¯è¯·æ±‚elementå’Œechartsçš„æ•°æ®ï¼Œè¿™ä¸¤ä¸ªä¾èµ–å¾ˆå¤§éƒ½è¾¾åˆ°äº†2MBä»¥ä¸Šï¼Œ
     æ‰€ä»¥æ­£å¸¸ä¼ è¾“æ—¶é—´ä¼šå¾ˆé•¿ï¼Œä½†æ˜¯ä½¿ç”¨CDNè¿˜æ˜¯å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåè€Œæ˜¯æŒ‰éœ€å¼•ç”¨ååˆ†åŒ…åŠ è½½æ›´æœ‰æ•ˆã€‚
     æ‰€ä»¥æœ€åä¹Ÿæ²¡æœ‰ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚   
```
#### å…¶ä»–éœ€è¦æ³¨æ„çš„ç‚¹
```javascript
**å¼•å…¥echartsè¿›è¡Œå¯è§†åŒ–å±•ç¤ºæ—¶ï¼Œåˆ·æ–°/æ¢é¡µé¢ä¸æ‰§è¡Œçš„é—®**
 // æ—§ä»£ç 
 // let myChartPei = echarts.init(document.getElementById("box1"));

 // ç§»é™¤äº†_echarts_instanceå±æ€§ï¼Œ ç„¶ååœ¨è¯¥å…ƒç´ ä¸Šåˆå§‹åŒ–äº†ä¸€ä¸ªæ–°çš„EChartså®ä¾‹
 let dsiab_com = document.getElementById("box1")
 dsiab_com.removeAttribute('_echarts_instance_')
 var myChartPei = echarts.init(dsiab_com);

**ä½¿ç”¨element-pluså¼¹å‡ºæ¶ˆæ¯æ¡†æ—¶ï¼Œéœ€è¦å¼•å…¥cssæ ·å¼ï¼Œä¸ç„¶æ²¡æœ‰æ•ˆæœ**
 import { ElMessage, ElMessageBox } from 'element-plus'
 ElMessageBox.confirm(
    'ä½ ç¡®å®šåˆ é™¤å½“å‰è¡Œçš„æ•°æ®ï¼Œç¡®è®¤åˆ é™¤æ˜¯ä¸å¯é€†çš„æ“ä½œ?',
    'Warning',
    {
      confirmButtonText: 'OK',
      cancelButtonText: 'Cancel',
      type: 'warning',
    }
  )

**è·³è½¬è·¯ç”±é“¾æ¥ï¼Œç„¦ç‚¹ä¼šä¸¢å¤±ï¼Œéœ€è¦åŠ ä¸ŠactiveMenu**
   åœ¨è·¯ç”±ä¸‹æ·»åŠ metaå…ƒä¿¡æ¯ 
   meta:{ // é™„å¸¦å…ƒä¿¡æ¯ï¼Œå¯ä»¥ä¼ é€’ activeMenu
        activeMenu:'/product/list', //å†™ä¸Šå€¼ é˜²æ­¢å¤±å»ç„¦ç‚¹
        title:'äº§å“æ“ä½œ'
        }
   åœ¨menu.vueç»„ä»¶çš„é»˜è®¤æ¿€æ´»å±æ€§ä¸Š åŠ ä¸Š
   :default-active="$router.currentRoute.value.meta.activeMenu || $router.currentRoute.value.path"
   router=true

**ä¸Šä¼ å›¾ç‰‡ï¼Œå›¾ç‰‡åœ°å€çš„æ‹¼æ¥ã€å¤šç»„å›¾ç‰‡ä¸Šä¼ ã€JSONæ ¼å¼è½¬æ¢**
    url = host+'/'+ response.url.slice(7);

    ruleForm.image.push(url);

    JSON.stringify(image);
    arr = JSON.parse(image) // imageéœ€è¦urlåœ°å€è½¬åŒ–æˆå›¾ç‰‡æ ¼å¼

**æŒä¹…åŒ–æ•°æ®**
    å°†ç”¨æˆ·è¾“å…¥çš„æ•°æ® è´¦æˆ·ã€å¯†ç  ä¼ å…¥æœåŠ¡å™¨çš„åå°åšéªŒè¯ï¼Œå¾—åˆ°å“åº”tokenå’Œç”¨æˆ·å
    å°†ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°piniaï¼Œ å¹¶å¼€å¯æ•°æ®æŒä¹…åŒ–
    
    å®‰è£…ä¾èµ– npm i pinia-plugin-persistedstate 
    Main.tsä¸­
    import piniapluginpersistedstate from 'pinia-plugin-persistedstate' 
    pinia.use(piniapluginpersistedstate);
    piniaä¸­å¼€å¯  persist: true 

```